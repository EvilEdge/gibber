<!DOCTYPE html>
<html>
	<head>
		<script src="js/audiolib.js"></script>
		<script src="js/gibber/gibber.js"></script>		
	    <script src="js/ace/ace.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/ace/mode-javascript.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/ace/theme-twilight.js" type="text/javascript" charset="utf-8"></script>
		<script>
		window.onload	= function(){
	        var editor = ace.edit("editor");
		    var JavaScriptMode = require("ace/mode/javascript").Mode;
		    editor.getSession().setMode(new JavaScriptMode());
			editor.setTheme("ace/theme/twilight");
			editor.commands.addCommand({
			    name: 'evaluate',
			    bindKey: {
			        win: 'Ctrl-Return',
			        mac: 'Ctrl-Return',
			        sender: 'editor'
			    },
			    exec: function(env, args, request) {
			        var text = editor.getSession().doc.getTextRange(editor.getSelectionRange());
					if(text === "") {
						text = editor.getSession().getValue();
					}
					eval(text);
			    }
			});	
						
			GND.init();
				// s = Tri(160, .6);
				// // l = LFO(2, 12)
				// s.mod("freqOffset", LFO(2, 12));
				// s.mod("ampOffset", LFO(8, .4));
				// //s.fm = -.5;
				// t = StepSequencer(250, [125, 150, 88, 112]);
				// s.mod("frequency", t);
		};
		
		</script>
		<style>
		#editor {
		        position: absolute;
		        width: 800px;
		        height: 400px;
		    }
		</style>
	</head>
	<body>
		<div id="editor">
// execute selected code using Ctrl-Return. If no code is selected entire block is run.
		
sine = Sine(240, .5); 				// Create a sine wave at frequency 240, amplitude .5
sine.mod("freqOffset", LFO(4,10));  // modulate the frequencyOffset by 10Hz with an LFO running at 4Hz
	
//  GND.stop();
//  GND.start();

square = Square(120, .15);
freqs = [120, 240, 120, 360];

step = StepSequencer(250, freqs); 	// create a step sequencer. each step is 250 ms.

square.mod("frequency", step);		// use step sequencer to set freq of saw wave
square.mod("ampOffset", LFO(10, .15)); // tremolo
		
		</div>
	</body>
</html>
